"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{8347:function(e,t,n){n.d(t,{CX:function(){return nc},Gf:function(){return aE},Gt:function(){return nd},OK:function(){return tt},Vn:function(){return nl},dc:function(){return tM},ec:function(){return nR},lx:function(){return nP},mR:function(){return aY},vp:function(){return nF}});var r,a,i,s,o,c,l,d,u,h,p,f,g,y,m,_,E,b,T,v,A,w,k,I,C,S,x,D,V,N,O,B,P,F=n(776),R=n(1985),M=n(1664),L=n(2334),$=n(790),H=n(3138),U=n(7661),j=n(3738),Y=n(7685),K=n(9611),W=n(3425),q=n(8268),G=n(3700),z=n(9825),X=n(7597);n(3679);var J=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,Q=Object.getOwnPropertyNames,ee=Object.prototype.hasOwnProperty,et=(e,t)=>{for(var n in t)J(e,n,{get:t[n],enumerable:!0})};et({},{ADDR_BOUND:()=>eM,API_VERSION:()=>eP,BaseUrl:()=>ej,FeeMarginPercentage:()=>eq,IS_BROWSER:()=>e_,MASK_250:()=>eB,MAX_STORAGE_ITEM_SIZE:()=>eR,NetworkName:()=>eY,PRIME:()=>eF,RANGE_FELT:()=>e$,RANGE_I128:()=>eH,RANGE_U128:()=>eU,RPC_DEFAULT_VERSION:()=>ez,RPC_NODES:()=>eX,StarknetChainId:()=>eK,TEXT_TO_FELT_MAX_LEN:()=>eN,TRANSACTION_VERSION:()=>en.ETransactionVersion,TransactionHashPrefix:()=>eW,UDC:()=>eG,ZERO:()=>eO});var en={};et(en,{JRPC:()=>er,RPCSPEC06:()=>ea,RPCSPEC07:()=>F});var er={},ea={};et(ea,{EBlockTag:()=>eh,EDAMode:()=>ef,EDataAvailabilityMode:()=>ep,ESimulationFlag:()=>ec,ETransactionExecutionStatus:()=>eu,ETransactionFinalityStatus:()=>ed,ETransactionStatus:()=>el,ETransactionType:()=>eo,ETransactionVersion:()=>eg,ETransactionVersion2:()=>ey,ETransactionVersion3:()=>em,Errors:()=>ei,SPEC:()=>es});var ei={},es={},eo=((r=eo||{}).DECLARE="DECLARE",r.DEPLOY="DEPLOY",r.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",r.INVOKE="INVOKE",r.L1_HANDLER="L1_HANDLER",r),ec=((a=ec||{}).SKIP_VALIDATE="SKIP_VALIDATE",a.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",a),el=((i=el||{}).RECEIVED="RECEIVED",i.REJECTED="REJECTED",i.ACCEPTED_ON_L2="ACCEPTED_ON_L2",i.ACCEPTED_ON_L1="ACCEPTED_ON_L1",i),ed=((s=ed||{}).ACCEPTED_ON_L2="ACCEPTED_ON_L2",s.ACCEPTED_ON_L1="ACCEPTED_ON_L1",s),eu=((o=eu||{}).SUCCEEDED="SUCCEEDED",o.REVERTED="REVERTED",o),eh=((c=eh||{}).PENDING="pending",c.LATEST="latest",c),ep=((l=ep||{}).L1="L1",l.L2="L2",l),ef=((d=ef||{})[d.L1=0]="L1",d[d.L2=1]="L2",d),eg=((u=eg||{}).V0="0x0",u.V1="0x1",u.V2="0x2",u.V3="0x3",u.F0="0x100000000000000000000000000000000",u.F1="0x100000000000000000000000000000001",u.F2="0x100000000000000000000000000000002",u.F3="0x100000000000000000000000000000003",u),ey=((h=ey||{}).V0="0x0",h.V1="0x1",h.V2="0x2",h.F0="0x100000000000000000000000000000000",h.F1="0x100000000000000000000000000000001",h.F2="0x100000000000000000000000000000002",h),em=((p=em||{}).V3="0x3",p.F3="0x100000000000000000000000000000003",p);((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of Q(t))ee.call(e,a)||a===n||J(e,a,{get:()=>t[a],enumerable:!(r=Z(t,a))||r.enumerable})})(en,F,"default"),et({},{IS_BROWSER:()=>e_,addHexPrefix:()=>eI,arrayBufferToString:()=>eE,atobUniversal:()=>ev,btoaUniversal:()=>eA,buf2hex:()=>ew,calcByteLength:()=>eS,padLeft:()=>eC,pascalToSnake:()=>eV,removeHexPrefix:()=>ek,sanitizeBytes:()=>ex,sanitizeHex:()=>eD,stringToArrayBuffer:()=>eT,utf8ToArray:()=>eb});var e_="undefined"!=typeof window;function eE(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function eb(e){return new TextEncoder().encode(e)}function eT(e){return eb(e)}function ev(e){return M.US.decode(e)}function eA(e){return M.US.encode(new Uint8Array(e))}function ew(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function ek(e){return e.replace(/^0x/i,"")}function eI(e){return`0x${ek(e)}`}function eC(e,t,n="0"){return function(e,t,n,r="0"){let a=t-e.length,i=e;if(a>0){let t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function eS(e,t=8){let{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function ex(e,t=8,n="0"){return eC(e,eS(e,t),n)}function eD(e){return(e=ex(e=ek(e),2))&&(e=eI(e)),e}var eV=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,eN=31,eO=0n,eB=2n**250n-1n,eP=eO,eF=2n**251n+17n*2n**192n+1n,eR=256n,eM=2n**251n-eR,eL=(e,t)=>({min:e,max:t}),e$=eL(eO,eF-1n),eH=eL(-(2n**127n),2n**127n-1n),eU=eL(eO,2n**128n-1n),ej=((f=ej||{}).SN_MAIN="https://alpha-mainnet.starknet.io",f.SN_SEPOLIA="https://alpha-sepolia.starknet.io",f),eY=((g=eY||{}).SN_MAIN="SN_MAIN",g.SN_SEPOLIA="SN_SEPOLIA",g),eK=((y=eK||{}).SN_MAIN="0x534e5f4d41494e",y.SN_SEPOLIA="0x534e5f5345504f4c4941",y),eW=((m=eW||{}).DECLARE="0x6465636c617265",m.DEPLOY="0x6465706c6f79",m.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",m.INVOKE="0x696e766f6b65",m.L1_HANDLER="0x6c315f68616e646c6572",m),eq=((_=eq||{})[_.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",_[_.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",_[_.MAX_FEE=50]="MAX_FEE",_),eG={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ez="v0_7",eX={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${ez}`,`https://free-rpc.nethermind.io/mainnet-juno/${ez}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${ez}`,`https://free-rpc.nethermind.io/sepolia-juno/${ez}`]},eJ={};et(eJ,{RpcChannel:()=>rZ});var eZ=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},eQ=class extends eZ{};et({},{BlockStatus:()=>e7,BlockTag:()=>e9,EntryPointType:()=>e5,Literal:()=>e2,RPC:()=>en,TransactionExecutionStatus:()=>e8,TransactionFinalityStatus:()=>e4,TransactionStatus:()=>e3,TransactionType:()=>e6,TypedDataRevision:()=>H.P,Uint:()=>e1,ValidateType:()=>e0});var e0=((E=e0||{}).DEPLOY="DEPLOY",E.CALL="CALL",E.INVOKE="INVOKE",E),e1=((b=e1||{}).u8="core::integer::u8",b.u16="core::integer::u16",b.u32="core::integer::u32",b.u64="core::integer::u64",b.u128="core::integer::u128",b.u256="core::integer::u256",b.u512="core::integer::u512",b),e2=((T=e2||{}).ClassHash="core::starknet::class_hash::ClassHash",T.ContractAddress="core::starknet::contract_address::ContractAddress",T.Secp256k1Point="core::starknet::secp256k1::Secp256k1Point",T),e5=((v=e5||{}).EXTERNAL="EXTERNAL",v.L1_HANDLER="L1_HANDLER",v.CONSTRUCTOR="CONSTRUCTOR",v),e6=((A=e6||{}).DECLARE="DECLARE",A.DEPLOY="DEPLOY",A.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",A.INVOKE="INVOKE_FUNCTION",A),e3=((w=e3||{}).NOT_RECEIVED="NOT_RECEIVED",w.RECEIVED="RECEIVED",w.ACCEPTED_ON_L2="ACCEPTED_ON_L2",w.ACCEPTED_ON_L1="ACCEPTED_ON_L1",w.REJECTED="REJECTED",w.REVERTED="REVERTED",w),e4=((k=e4||{}).NOT_RECEIVED="NOT_RECEIVED",k.RECEIVED="RECEIVED",k.ACCEPTED_ON_L2="ACCEPTED_ON_L2",k.ACCEPTED_ON_L1="ACCEPTED_ON_L1",k),e8=((I=e8||{}).REJECTED="REJECTED",I.REVERTED="REVERTED",I.SUCCEEDED="SUCCEEDED",I),e7=((C=e7||{}).PENDING="PENDING",C.ACCEPTED_ON_L1="ACCEPTED_ON_L1",C.ACCEPTED_ON_L2="ACCEPTED_ON_L2",C.REJECTED="REJECTED",C),e9=((S=e9||{}).PENDING="pending",S.LATEST="latest",S);function te(e,t){if(!e)throw Error(t||"Assertion failure")}var tt={};function tn(e){return/^0x[0-9a-f]*$/i.test(e)}function tr(e){return BigInt(e)}function ta(e){return"bigint"==typeof e}function ti(e){return eI(tr(e).toString(16))}et(tt,{addPercent:()=>tE,assertInRange:()=>td,bigNumberishArrayToDecimalStringArray:()=>tu,bigNumberishArrayToHexadecimalStringArray:()=>th,cleanHex:()=>tl,getDecimalString:()=>tf,getHexString:()=>tg,getHexStringArray:()=>ty,hexToBytes:()=>t_,hexToDecimalString:()=>tc,isBigInt:()=>ta,isBoolean:()=>tT,isHex:()=>tn,isNumber:()=>tb,isStringWholeNumber:()=>tp,toBigInt:()=>tr,toCairoBool:()=>tm,toHex:()=>ti,toHexString:()=>ts,toStorageKey:()=>to});var ts=ti;function to(e){return eI(tr(e).toString(16).padStart(64,"0"))}function tc(e){return BigInt(eI(e)).toString(10)}function tl(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function td(e,t,n,r=""){let a=""===r?"invalid length":`invalid ${r} length`,i=BigInt(e),s=BigInt(t),o=BigInt(n);te(i>=s&&i<=o,`Message not signable, ${a}.`)}function tu(e){return e.map(e=>tr(e).toString(10))}function th(e){return e.map(e=>ti(e))}function tp(e){return/^\d+$/.test(e)}function tf(e){if(tn(e))return tc(e);if(tp(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tg(e){if(tn(e))return e;if(tp(e))return ts(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function ty(e){return e.map(tg)}function tm(e){return(+e).toString()}function t_(e){if(!tn(e))throw Error(`${e} needs to be a hex-string`);let t=ek(e);return t.length%2!=0&&(t=`0${t}`),(0,L.hexToBytes)(t)}function tE(e,t){let n=BigInt(e);return n+n*BigInt(t)/100n}function tb(e){return"number"==typeof e}function tT(e){return"boolean"==typeof e}function tv(e){let t=ek(ti(BigInt(e))),n=t.length%2==0?t:`0${t}`;return eI((0,U.keccak)(t_(eI(n))).toString(16))}function tA(e){return BigInt(eI((0,U.keccak)(eb(e)).toString(16)))&eB}function tw(e){return ti(tA(e))}function tk(e){return tn(e)?e:tp(e)?ts(e):tw(e)}function tI(e){return/^[\x00-\x7F]*$/.test(e)}function tC(e){return e.length<=eN}function tS(e){return/^[0-9]*$/i.test(e)}function tx(e){return"string"==typeof e}function tD(e){return tx(e)&&!tn(e)&&!tp(e)}et({},{getSelector:()=>tk,getSelectorFromName:()=>tw,keccakBn:()=>tv,starknetKeccak:()=>tA}),et({},{decodeShortString:()=>tP,encodeShortString:()=>tB,isASCII:()=>tI,isDecimalString:()=>tS,isLongText:()=>tN,isShortString:()=>tC,isShortText:()=>tV,isString:()=>tx,isText:()=>tD,splitLongString:()=>tO});var tV=e=>tD(e)&&tC(e),tN=e=>tD(e)&&!tC(e);function tO(e){let t=RegExp(`[^]{1,${eN}}`,"g");return e.match(t)||[]}function tB(e){if(!tI(e))throw Error(`${e} is not an ASCII string`);if(!tC(e))throw Error(`${e} is too long`);return eI(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tP(e){if(!tI(e))throw Error(`${e} is not an ASCII string`);if(tn(e))return ek(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tS(e))return tP("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}function tF(e){let t=0n===BigInt(e.pending_word)?"":tP(ti(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tP(ti(t))),"")+t}function tR(e){let t=tO(e),n=t[t.length-1],r=t.map(tB),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}et({},{byteArrayFromString:()=>tR,stringFromByteArray:()=>tF});var tM={};function tL(e){if(ta(e)||Number.isInteger(e))return e.toString();if(tx(e)){if(tn(e))return BigInt(e).toString();if(tD(e)){if(!tC(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(tB(e)).toString()}if(tp(e))return e}if(tT(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}et(tM,{felt:()=>no,getAbiContractVersion:()=>nr,getArrayType:()=>ne,isCairo1Abi:()=>nt,isCairo1Type:()=>t9,isLen:()=>tK,isTypeArray:()=>tq,isTypeBool:()=>t5,isTypeByteArray:()=>t8,isTypeBytes31:()=>t4,isTypeContractAddress:()=>t6,isTypeEnum:()=>tJ,isTypeEthAddress:()=>t3,isTypeFelt:()=>tW,isTypeLiteral:()=>t2,isTypeNamedTuple:()=>tz,isTypeNonZero:()=>nn,isTypeOption:()=>tZ,isTypeResult:()=>tQ,isTypeSecp256k1Point:()=>t7,isTypeStruct:()=>tX,isTypeTuple:()=>tG,isTypeUint:()=>t0,isTypeUint256:()=>t1,tuple:()=>ns,uint256:()=>na,uint512:()=>ni});var t$=(1n<<128n)-1n,tH=(1n<<256n)-1n,tU=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){let n=e.validate(t[0]);this.low=n&t$,this.high=n>>128n}else if(2===t.length){let n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tH)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let n=BigInt(e),r=BigInt(t);if(n<0n||n>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(r<0n||r>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:eI(this.low.toString(16)),high:eI(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tL(this.low),tL(this.high)]}},tj=(1n<<512n)-1n,tY=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){let n=e.validate(t[0]);this.limb0=n&t$,this.limb1=(n&t$<<128n)>>128n,this.limb2=(n&t$<<256n)>>256n,this.limb3=n>>384n}else if(4===t.length){let n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>tj)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,r){let a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach((e,t)=>{if(e<0n||e>t$)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:eI(this.limb0.toString(16)),limb1:eI(this.limb1.toString(16)),limb2:eI(this.limb2.toString(16)),limb3:eI(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tL(this.limb0),tL(this.limb1),tL(this.limb2),tL(this.limb3)]}},tK=e=>/_len$/.test(e),tW=e=>"felt"===e||"core::felt252"===e,tq=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),tG=e=>/^\(.*\)$/i.test(e),tz=e=>/\(.*\)/i.test(e)&&e.includes(":"),tX=(e,t)=>e in t,tJ=(e,t)=>e in t,tZ=e=>e.startsWith("core::option::Option::"),tQ=e=>e.startsWith("core::result::Result::"),t0=e=>Object.values(e1).includes(e),t1=e=>tU.isAbiType(e),t2=e=>Object.values(e2).includes(e),t5=e=>"core::bool"===e,t6=e=>"core::starknet::contract_address::ContractAddress"===e,t3=e=>"core::starknet::eth_address::EthAddress"===e,t4=e=>"core::bytes_31::bytes31"===e,t8=e=>"core::byte_array::ByteArray"===e,t7=e=>"core::starknet::secp256k1::Secp256k1Point"===e,t9=e=>e.includes("::"),ne=e=>t9(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function nt(e){let{cairo:t}=nr(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function nn(e){return e.startsWith("core::zeroable::NonZero::")}function nr(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>"function"===e.type&&(e.inputs.length||e.outputs.length));return t?t9((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var na=e=>new tU(e).toUint256DecimalString(),ni=e=>new tY(e).toUint512DecimalString(),ns=(...e)=>({...e});function no(e){return tL(e)}var nc=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>void 0!==e).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);if(void 0!==e)return e[1]}activeVariant(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);return void 0===e?"":e[0]}},nl=((x=nl||{})[x.Some=0]="Some",x[x.None=1]="None",x),nd=class{Some;None;constructor(e,t){if(!(e in nl))throw Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return void 0!==this.Some}isNone(){return!0===this.None}},nu=((D=nu||{})[D.Ok=0]="Ok",D[D.Err=1]="Err",D),nh=class{Ok;Err;constructor(e,t){if(!(e in nu))throw Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return void 0!==this.Ok}isErr(){return void 0!==this.Err}},np={isBN:(e,t,n)=>{if(!ta(e[n]))throw Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}},nf=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>tK(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},ng=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(e=>"interface"===e.type).items.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function ny(e,t,n){return"constructor"===e&&!n&&!t.length}function nm(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return Number.POSITIVE_INFINITY}function n_(e){return t9(e)?function(e){let t;let n=e.slice(1,-1),r=[],a=0;for(;a<n.length;){switch(!0){case"("===n[a]:t=a+nm(n.slice(a),"(",")")+1;break;case n.startsWith("core::result::Result::<",a)||n.startsWith("core::array::Array::<",a)||n.startsWith("core::option::Option::<",a):t=a+nm(n.slice(a),"<",">")+1;break;default:{let e=n.indexOf(",",a);t=-1!==e?e:Number.POSITIVE_INFINITY}}r.push(n.slice(a,t)),a=t+2}return r}(e):function(e){let{subTuple:t,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1,i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(e.replace(/\s/g,"").slice(1,-1)),r=n.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return tz(e)&&(r=r.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}(t)),[])),r}(e)}function nE(e,t){switch(!0){case tU.isAbiType(e):return new tU(t).toApiRequest();case tY.isAbiType(e):return new tY(t).toApiRequest();case t4(e):return tB(t.toString());case t7(e):{let e=ek(ti(t)).padStart(128,"0"),n=na(eI(e.slice(-64))),r=na(eI(e.slice(0,-64)));return[tL(r.low),tL(r.high),tL(n.low),tL(n.high)]}default:return tL(t)}}function nb(e,t,n,r){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){let a=[];a.push(tL(e.length));let i=ne(t);return e.reduce((e,t)=>e.concat(nb(t,i,n,r)),a)}if(n[t]&&n[t].members.length){if(tU.isAbiType(t))return new tU(e).toApiRequest();if(tY.isAbiType(t))return new tY(e).toApiRequest();if("core::starknet::eth_address::EthAddress"===t)return nE(t,e);if("core::byte_array::ByteArray"===t)return function(e){let t=tR(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}(e);let{members:a}=n[t];return a.reduce((t,a)=>t.concat(nb(e[a.name],a.type,n,r)),[])}if(tG(t))return(function(e,t){let n=n_(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r} 
      expected: ${n}`);return n.map((e,t)=>({element:r[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=nb(t.element,t.type,n,r);return e.concat(a)},[]);if(tU.isAbiType(t))return new tU(e).toApiRequest();if(tY.isAbiType(t))return new tY(e).toApiRequest();if(tJ(t,r)){let{variants:a}=r[t];if(tZ(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return"0";let s=nb(e.unwrap(),i,n,r);return Array.isArray(s)?["0",...s]:["0",s]}return"1"}if(tQ(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return"0";let s=nb(e.unwrap(),i,n,r);return Array.isArray(s)?["0",...s]:["0",s]}let t=a.find(e=>"Err"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return"1";let s=nb(e.unwrap(),i,n,r);return Array.isArray(s)?["1",...s]:["1",s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(void 0===s)throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,c=a.findIndex(e=>e.name===i);if("()"===o)return c.toString();let l=nb(e.unwrap(),o,n,r);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(nn(t))return nE(ne(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return nE(t,e)}function nT(e,t){switch(!0){case t5(e):return!!BigInt(t.next().value);case tU.isAbiType(e):return new tU(t.next().value,t.next().value).toBigInt();case tY.isAbiType(e):let n=t.next().value;return new tY(n,t.next().value,t.next().value,t.next().value).toBigInt();case"core::starknet::eth_address::EthAddress"===e:return BigInt(t.next().value);case"core::bytes_31::bytes31"===e:return tP(t.next().value);case t7(e):let r=ek(t.next().value).padStart(32,"0"),a=ek(t.next().value).padStart(32,"0"),i=ek(t.next().value).padStart(32,"0");return BigInt(eI(a+r+ek(t.next().value).padStart(32,"0")+i));default:return BigInt(t.next().value)}}function nv(e,t,n,r){if("()"===t.type)return{};if(tU.isAbiType(t.type))return new tU(e.next().value,e.next().value).toBigInt();if(tY.isAbiType(t.type)){let t=e.next().value;return new tY(t,e.next().value,e.next().value,e.next().value).toBigInt()}if(t8(t.type)){let t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(ti(e.next().value));return tF({data:t,pending_word:ti(e.next().value),pending_word_len:BigInt(e.next().value)})}if(tq(t.type)){let a=[],i={name:"",type:ne(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(nv(e,i,n,r));return a}if(nn(t.type))return nv(e,{name:"",type:ne(t.type)},n,r);if(n&&t.type in n&&n[t.type])return"core::starknet::eth_address::EthAddress"===t.type?nT(t.type,e):n[t.type].members.reduce((t,a)=>(t[a.name]=nv(e,a,n,r),t),{});if(r&&t.type in r&&r[t.type]){let a=Number(e.next().value),i=r[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=nv(e,{name:"",type:i.type},n,r):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=0===a?i.Some:void 0;return new nd(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===a?i.Ok:i.Err,new nh(a,e)}return new nc(i)}if(tG(t.type))return n_(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=nv(e,{name:s,type:o},n,r),t},{});if(tq(t.type)){let a=[],i={name:"",type:ne(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(nv(e,i,n,r));return a}return nT(t.type,e)}function nA(e,t,n,r,a){let{name:i,type:s}=t;switch(!0){case tK(i):return BigInt(e.next().value);case n&&s in n||tG(s):case r&&tJ(s,r):return nv(e,t,n,r);case tq(s):if(t9(s))return nv(e,t,n,r);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(nv(e,{name:i,type:t.type.replace("*","")},n,r))}return o;case nn(s):return nv(e,t,n,r);default:return nT(s,e)}}var nw=(e,t)=>{if(te(tx(e)||tb(e)||ta(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),tx(e)&&!tn(e))return;let n=BigInt(e.toString(10));te(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},nk=(e,t)=>{te(tx(e),`Validate: arg ${t.name} should be a string.`),te(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)},nI=(e,t)=>{te(tx(e),`Validate: arg ${t.name} should be a string.`)},nC=(e,t)=>{let n;switch(tb(e)&&te(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),te(tx(e)||tb(e)||ta(e)||"object"==typeof e&&"low"in e&&"high"in e||"object"==typeof e&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case"core::integer::u256":n=new tU(e).toBigInt();break;case"core::integer::u512":n=new tY(e).toBigInt();break;default:n=tr(e)}switch(t.type){case"core::integer::u8":te(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":te(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":te(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":te(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":te(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":te(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::integer::u512":te(tY.is(n),`Validate: arg ${t.name} is ${t.type} 0 - 2^512-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":te(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case"core::starknet::secp256k1::Secp256k1Point":te(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`)}},nS=(e,t)=>{te(tT(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},nx=(e,t,n)=>{if("core::integer::u256"===t.type||"core::integer::u512"===t.type){nC(e,t);return}if("core::starknet::eth_address::EthAddress"===t.type){te("object"!=typeof e,`EthAddress type is waiting a BigNumberish. Got ${e}`);let n=BigInt(e.toString(10));te(n>=0n&&n<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}te("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),n[t.type].members.forEach(({name:n})=>{te(Object.keys(e).includes(n),`Validate: arg ${t.name} should have a property ${n}`)})},nD=(e,t)=>{te("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);let n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(tZ(t.type)&&r.includes("isSome")&&r.includes("isNone")||tQ(t.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},nV=(e,t)=>{te("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},nN=(e,t,n,r)=>{let a=ne(t.type);if(!(tW(a)&&tN(e)))switch(te(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case tW(a):e.forEach(e=>nw(e,t));break;case tG(a):e.forEach(e=>nV(e,{name:t.name,type:a}));break;case tq(a):e.forEach(e=>nN(e,{name:"",type:a},n,r));break;case tX(a,n):e.forEach(e=>nx(e,{name:t.name,type:a},n));break;case tJ(a,r):e.forEach(e=>nD(e,{name:t.name,type:a}));break;case t0(a)||t2(a):e.forEach(e=>nC(e,{name:"",type:a}));break;case t5(a):e.forEach(e=>nS(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}},nO=(e,t)=>{let n=ne(t.type);switch(te(t0(n)&&n!==tY.abiSelector||tW(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case tW(n):nw(e,t),te(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case t0(n):(nC(e,{name:"",type:n}),"core::integer::u256"===t.type)?te(new tU(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):te(tr(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function nB(e,t,n,r){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case tK(a.name):return e;case tW(a.type):nw(i,a);break;case t4(a.type):nk(i,a);break;case t0(a.type)||t2(a.type):nC(i,a);break;case t5(a.type):nS(i,a);break;case t8(a.type):nI(i,a);break;case tq(a.type):nN(i,a,n,r);break;case tX(a.type,n):nx(i,a,n);break;case tJ(a.type,r):nD(i,a);break;case tG(a.type):nV(i,a);break;case nn(a.type):nO(i,a);break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var nP=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e){let t=e.find(e=>"interface"===e.type)?2:nt(e)?1:0;if(0===t||1===t)return new nf(e);if(2===t)return new ng(e);throw Error(`Unsupported ABI version ${t}`)}(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){"DEPLOY"!==e&&te(this.abi.filter(t=>{if("function"!==t.type)return!1;let n="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!n:n}).map(e=>e.name).includes(t),`${"INVOKE"===e?"invocable":"viewable"} method not found in abi`);let r=this.abi.find(n=>"DEPLOY"===e?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type);if(ny(t,n,r))return;let a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${n.length}`);nB(r,n,this.structs,this.enums)}compile(e,t){let n;let r=this.abi.find(t=>t.name===e);if(ny(e,t,r))return[];Array.isArray(t)?n=t:(n=Object.values(function(e,t,n,r){let a=(e,t)=>{if(tq(t))return function(e,t){let n=ne(t);return tx(e)?e:e.map(e=>a(e,n))}(e,t);if(tJ(t,r))return s(e,r[t]);if(tG(t))return n_(t).reduce((t,n,r)=>{let i;let s=Object.keys(e),o=n?.type?n.type:n;return i=a(e[s[r]],o),Object.defineProperty(t,r.toString(),{enumerable:!0,value:i??e[s[r]]}),t},{});if(t3(t)||nn(t)||t8(t)||t7(t))return e;if(tU.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(tY.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return tX(t,n)?i(e,n[t].members):e},i=(e,t)=>t.reduce((t,n)=>{let r;if("undefined"===e[n.name]&&(t9(n.type)||!tK(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r??e[n.name]}),t},{}),s=(e,t)=>{if(tQ(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),r=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new nh(0,a(e.unwrap(),n)):new nh(1,a(e.unwrap(),r))}if(tZ(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new nd(0,a(e.unwrap(),n)):new nd(1,{})}return new nc(Object.fromEntries(Object.entries(e.variant).map(n=>{if(void 0===n[1])return n;let r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?n:[n[0],a(e.unwrap(),r)]})))};return t.reduce((t,n)=>{let r;return tK(n.name)&&!t9(n.type)||(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r})),t},{})}(t,r.inputs,this.structs,this.enums)),nB(r,n,this.structs,this.enums));let a=n[Symbol.iterator](),i=r.inputs.reduce((e,t)=>tK(t.name)&&!t9(t.type)?e:e.concat(function(e,t,n,r){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case tq(i):if(!Array.isArray(s)&&!tD(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return tx(s)&&(s=tO(s)),nb(s,t.type,n,r);case nn(i):return nE(ne(i),s);case"core::starknet::eth_address::EthAddress"===i:return nE(i,s);case tX(i,n)||tG(i)||tU.isAbiType(i)||tU.isAbiType(i):case tJ(i,r):return nb(s,i,n,r);default:return nE(i,s)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t;let n=e=>{let t=(e,n=".")=>{let r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=tw(i):tN(i)&&(i=tR(i));let s=Array.isArray(r)&&"0"===e?"$$len":e;if(ta(i))return[[`${n}${s}`,tL(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),r=[...Object.getOwnPropertyNames(i),...e];if(r.includes("isSome")&&r.includes("isNone")){let e=i,r=e.isSome()?0:1;return e.isSome()?t({0:r,1:e.unwrap()},`${n}${s}.`):[[`${n}${s}`,tL(r)]]}if(r.includes("isOk")&&r.includes("isErr")){let e=i;return t({0:e.isOk()?0:1,1:e.unwrap()},`${n}${s}.`)}if(r.includes("variant")&&r.includes("activeVariant")){let e=i,r=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===r);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${n}${s}`,tL(a)]]:t({0:a,1:e.unwrap()},`${n}${s}.`)}return t(i,`${n}${s}.`)}return[[`${n}${s}`,tL(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(n({...e})):Object.values(n(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:n}=this.abi.find(t=>t.name===e),r=t.flat()[Symbol.iterator](),a=n.flat().reduce((e,t,n)=>{let a=t.name??n;return e[a]=nA(r,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return function e(t,n,r){return Object.entries(t).reduce((a,[i,s])=>{let o=r??n[i];if(!(i in n)&&!r)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let n=e(t[i],t[i].map(e=>o));return a[i]=Object.values(n).join(""),a}return np.isBN(t,n,i),a[i]=tP(s),a}if("number"===o)return np.isBN(t,n,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let n=e(t[i],o,o[0]);return a[i]=Object.values(n),a}return"object"==typeof o?a[i]=e(t[i],o):np.unknown(t,n,i),a},{})}(this.parse(e,t),n)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>ti(e))}decodeParameters(e,t){let n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map(e=>nA(r,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}},nF={};et(nF,{calculateContractAddressFromHash:()=>rn,calculateDeclareTransactionHash:()=>n0,calculateDeployAccountTransactionHash:()=>n1,calculateInvokeTransactionHash:()=>nQ,computeCompiledClassHash:()=>rl,computeContractClassHash:()=>rh,computeHashOnElements:()=>n9,computeHintedClassHash:()=>ri,computeLegacyContractClassHash:()=>rs,computePedersenHash:()=>n8,computePedersenHashOnElements:()=>re,computePoseidonHash:()=>n7,computePoseidonHashOnElements:()=>rt,computeSierraContractClassHash:()=>ru,formatSpaces:()=>ra,getSelector:()=>tk,getSelectorFromName:()=>tw,hashByteCodeSegments:()=>rc,keccakBn:()=>tv,poseidon:()=>j,starknetKeccak:()=>tA}),et({},{calculateDeclareTransactionHash:()=>n$,calculateDeployAccountTransactionHash:()=>nH,calculateTransactionHash:()=>nU,calculateTransactionHashCommon:()=>nL,computeHashOnElements:()=>nM});var nR={};function nM(e){return[...e,e.length].reduce((e,t)=>U.pedersen(tr(e),tr(t)),0).toString()}function nL(e,t,n,r,a,i,s,o=[]){let c=[e,t,n,r,nM(a),i,s,...o];return nM(c)}function n$(e,t,n,r,a,i,s){return nL("0x6465636c617265",n,t,0,[e],r,a,[i,...s?[s]:[]])}function nH(e,t,n,r,a,i,s,o){return nL("0x6465706c6f795f6163636f756e74",a,e,0,[t,r,...n],i,s,[o])}function nU(e,t,n,r,a,i){return nL("0x696e766f6b65",t,e,0,n,r,a,[i])}et(nR,{starkCurve:()=>U,weierstrass:()=>Y}),et({},{calculateDeclareTransactionHash:()=>nJ,calculateDeployAccountTransactionHash:()=>nX,calculateInvokeTransactionHash:()=>nZ,calculateTransactionHashCommon:()=>nz,hashDAMode:()=>nq,hashFeeField:()=>nG});var nj=e=>e.map(e=>BigInt(e)),nY=64n+128n,nK=BigInt(tB("L1_GAS")),nW=BigInt(tB("L2_GAS"));function nq(e,t){return(BigInt(e)<<32n)+BigInt(t)}function nG(e,t){let n=(nK<<nY)+(BigInt(t.l1_gas.max_amount)<<128n)+BigInt(t.l1_gas.max_price_per_unit),r=(nW<<nY)+(BigInt(t.l2_gas.max_amount)<<128n)+BigInt(t.l2_gas.max_price_per_unit);return(0,U.poseidonHashMany)([BigInt(e),n,r])}function nz(e,t,n,r,a,i,s,o,c,l,d=[]){let u=nG(i,l),h=nq(o,c),p=nj([e,t,n,u,(0,U.poseidonHashMany)(nj(s)),r,a,h,...nj(d)]);return ti((0,U.poseidonHashMany)(p))}function nX(e,t,n,r,a,i,s,o,c,l,d,u){return nz("0x6465706c6f795f6163636f756e74",a,e,i,s,d,u,o,c,l,[(0,U.poseidonHashMany)(nj(n)),t,r])}function nJ(e,t,n,r,a,i,s,o,c,l,d,u){return nz("0x6465636c617265",r,n,a,i,d,nj(u),o,c,l,[(0,U.poseidonHashMany)(nj(s)),e,t])}function nZ(e,t,n,r,a,i,s,o,c,l,d){return nz("0x696e766f6b65",t,e,r,a,l,d,s,o,c,[(0,U.poseidonHashMany)(nj(i)),(0,U.poseidonHashMany)(nj(n))])}function nQ(e){return[en.ETransactionVersion.V3,en.ETransactionVersion.F3].includes(e.version)?nZ(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):nU(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function n0(e){return[en.ETransactionVersion.V3,en.ETransactionVersion.F3].includes(e.version)?nJ(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):n$(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function n1(e){return[en.ETransactionVersion.V3,en.ETransactionVersion.F3].includes(e.version)?nX(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):nH(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}et({},{parse:()=>n5,parseAlwaysAsBig:()=>n6,stringify:()=>n3,stringifyAlwaysAsBig:()=>n4});var n2=e=>{if(!K.U(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},n5=e=>K.Qc(String(e),void 0,n2),n6=e=>K.Qc(String(e),void 0,K.A7),n3=(e,t,n,r)=>K.Pz(e,t,n,r),n4=n3;function n8(e,t){return U.pedersen(BigInt(e),BigInt(t))}function n7(e,t){return ti(U.poseidonHash(BigInt(e),BigInt(t)))}function n9(e){return[...e,e.length].reduce((e,t)=>U.pedersen(BigInt(e),BigInt(t)),0).toString()}var re=n9;function rt(e){return ti((0,U.poseidonHashMany)(e.map(e=>BigInt(e))))}function rn(e,t,n,r){let a=n9(nP.compile(n));return ti(BigInt(n9([tL("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]))%eM)}function rr(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function ra(e){let t=!1,n=[];for(let r of e)'"'===r&&!1==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function ri(e){let{abi:t,program:n}=e,r=ra(n3({abi:t,program:n},rr));return eI(U.keccak(eb(r)).toString(16))}function rs(e){let t=tx(e)?n5(e):e,n=ti(eP),r=n9(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=n9(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=n9(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=n9(t.program.builtins.map(e=>tB(e))),o=ri(t),c=n9(t.program.data);return n9([n,r,a,i,s,o,c])}function ro(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,U.poseidonHashMany)(t.flatMap(e=>BigInt(tB(e)))))]});return(0,U.poseidonHashMany)(t)}function rc(e){let t=e.bytecode.map(e=>BigInt(e)),n=e.bytecode_segment_lengths??[],r=0,a=n.flatMap(e=>{let n=t.slice(r,r+=e);return[BigInt(e),(0,U.poseidonHashMany)(n)]});return 1n+(0,U.poseidonHashMany)(a)}function rl(e){let t=BigInt(tB("COMPILED_CLASS_V1")),n=ro(e.entry_points_by_type.EXTERNAL),r=ro(e.entry_points_by_type.L1_HANDLER),a=ro(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?rc(e):(0,U.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return ti((0,U.poseidonHashMany)([t,n,r,a,i]))}function rd(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,U.poseidonHashMany)(t)}function ru(e){let t=BigInt(tB("CONTRACT_CLASS_V0.1.0")),n=rd(e.entry_points_by_type.EXTERNAL),r=rd(e.entry_points_by_type.L1_HANDLER),a=rd(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=ra(n3(e.abi,null));return BigInt(eI(U.keccak(eb(t)).toString(16)))}(e),s=(0,U.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return ti((0,U.poseidonHashMany)([t,n,r,a,i,s]))}function rh(e){let t=tx(e)?n5(e):e;return"sierra_program"in t?ru(t):rs(t)}function rp(e){let t=tx(e)?e:n3(e);return eA((0,W.iv)(t))}function rf(e){return Array.isArray(e)?e:n5(eE((0,W.ec)(ev(e))))}function rg(){let e=U.utils.randomPrivateKey();return(0,U.getStarkKey)(e)}function ry(e){return eI(e).toLowerCase()}function rm(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>ti(e));try{let{r:t,s:n}=e;return[ti(t),ti(n)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function r_(e){return tu(rm(e))}function rE(e){return th(rm(e))}function rb(e,t=50){return tE(e,t)}function rT(e,t=50,n=50){if(ta(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(void 0===e.gas_consumed||void 0===e.gas_price)throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?ti(tE(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):ti(tE(e.gas_consumed,t)),max_price_per_unit:ti(tE(e.gas_price,n))}}}function rv(e){if(e===en.EDataAvailabilityMode.L1)return en.EDAMode.L1;if(e===en.EDataAvailabilityMode.L2)return en.EDAMode.L2;throw Error("EDAM conversion")}function rA(e,t){let n=t?ti(t):void 0,r=ti(e);if(t&&!Object.values(en.ETransactionVersion).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(en.ETransactionVersion).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function rw(e){if(!e)return;let t=ti(e);if(t===en.ETransactionVersion.V0)return en.ETransactionVersion.F0;if(t===en.ETransactionVersion.V1)return en.ETransactionVersion.F1;if(t===en.ETransactionVersion.V2)return en.ETransactionVersion.F2;if(t===en.ETransactionVersion.V3)return en.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function rk(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||en.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||en.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??rT(eO)}}function rI(e){return e===en.ETransactionVersion.F2?en.ETransactionVersion.F1:e===en.ETransactionVersion.V2?en.ETransactionVersion.V1:e}function rC(e){return"sierra_program"in(tx(e)?n5(e):e)}function rS(e){let t={...e};if(rC(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=rl(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??rh(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function rx(){return eD(ew(q.kA.utils.randomPrivateKey()))}function rD(e){td(e,eO,2n**160n-1n,"Ethereum Address ");let t=eI(ek(ti(e)).padStart(40,"0"));return te(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}et({},{compressProgram:()=>rp,decompressProgram:()=>rf,estimateFeeToBounds:()=>rT,estimatedFeeToMaxFee:()=>rb,formatSignature:()=>rm,intDAM:()=>rv,makeAddress:()=>ry,randomAddress:()=>rg,reduceV2:()=>rI,signatureToDecimalArray:()=>r_,signatureToHexArray:()=>rE,toFeeVersion:()=>rw,toTransactionVersion:()=>rA,v3Details:()=>rk}),et({},{ethRandomPrivateKey:()=>rx,validateAndParseEthAddress:()=>rD});var rV="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&(0,G.Z)(global.fetch)||z;function rN(e){return new Promise(t=>{setTimeout(t,e)})}function rO(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=ra(n3(e.abi)),t.sierra_program=ra(n3(e.sierra_program)),t.sierra_program=rp(t.sierra_program),t}function rB(e){let t=tx(e)?n5(e):e;return rC(e)?rO(t):{...t,..."program"in t&&{program:rp(t.program)}}}et({},{Block:()=>rR,createSierraContractClass:()=>rO,getDefaultNodeUrl:()=>rP,isPendingBlock:()=>r$,isPendingStateUpdate:()=>rU,isPendingTransaction:()=>rH,isV3Tx:()=>rM,isVersion:()=>rL,parseContract:()=>rB,validBlockTags:()=>rF,wait:()=>rN});var rP=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");let n=eX[e??"SN_SEPOLIA"],r=Math.floor(Math.random()*n.length);return n[r]},rF=Object.values(e9),rR=class{hash=null;number=null;tag=null;setIdentifier(e){if(tx(e)){if(tS(e))this.number=parseInt(e,10);else if(tn(e))this.hash=e;else if(rF.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`)}else ta(e)?this.hash=ti(e):tb(e)?this.number=e:this.tag="pending";if(tb(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function rM(e){let t=e.version?ti(e.version):en.ETransactionVersion.V3;return t===en.ETransactionVersion.V3||t===en.ETransactionVersion.F3}function rL(e,t){let[n,r]=e.split("."),[a,i]=t.split(".");return n===a&&r===i}function r$(e){return"PENDING"===e.status}function rH(e){return!("block_hash"in e)}function rU(e){return!("block_hash"in e)}et({},{buildUDCCall:()=>rz,fromCallsToExecuteCalldata:()=>rY,fromCallsToExecuteCalldataWithNonce:()=>rK,fromCallsToExecuteCalldata_cairo1:()=>rq,getExecuteCalldata:()=>rG,getVersionsByType:()=>rX,transformCallsToMulticallArrays:()=>rj,transformCallsToMulticallArrays_cairo1:()=>rW});var rj=e=>{let t=[],n=[];return e.forEach(e=>{let r=nP.compile(e.calldata||[]);t.push({to:tr(e.contractAddress).toString(10),selector:tr(tw(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:t,calldata:nP.compile({calldata:n})}},rY=e=>{let{callArray:t,calldata:n}=rj(e);return[...nP.compile({callArray:t}),...n]},rK=(e,t)=>[...rY(e),tr(t).toString()],rW=e=>e.map(e=>({to:tr(e.contractAddress).toString(10),selector:tr(tw(e.entrypoint)).toString(10),calldata:nP.compile(e.calldata||[])})),rq=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:nP.compile(e.calldata)}));return nP.compile({orderCalls:t})},rG=(e,t="0")=>"1"===t?rq(e):rY(e);function rz(e,t){let n=[].concat(e).map(e=>{let{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[]}=e,s=nP.compile(i),o=r??rg();return{call:{contractAddress:eG.ADDRESS,entrypoint:eG.ENTRYPOINT,calldata:[n,o,tm(a),s.length,...s]},address:rn(a?U.pedersen(t,o):o,n,s,a?eG.ADDRESS:0)}});return{calls:n.map(e=>e.call),addresses:n.map(e=>e.address)}}function rX(e){return"fee"===e?{v1:en.ETransactionVersion.F1,v2:en.ETransactionVersion.F2,v3:en.ETransactionVersion.F3}:{v1:en.ETransactionVersion.V1,v2:en.ETransactionVersion.V2,v3:en.ETransactionVersion.V3}}var rJ={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},rZ=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;waitMode;constructor(e){let{nodeUrl:t,retries:n,headers:r,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o}=e||{};Object.values(eY).includes(t)?this.nodeUrl=rP(t,e?.default):t?this.nodeUrl=t:this.nodeUrl=rP(void 0,e?.default),this.retries=n||rJ.retries,this.headers={...rJ.headers,...r},this.blockIdentifier=a||rJ.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0}setChainId(e){this.chainId=e}fetch(e,t,n=0){let r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return rV(this.nodeUrl,{method:"POST",body:n3(r),headers:this.headers})}errorHandler(e,t,n,r){if(n){let{code:r,message:a,data:i}=n;throw new eQ(`RPC: ${e} with params ${n3(t,null,2)}

        ${r}: ${a}: ${n3(i)}`)}if(r instanceof eQ)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new rR(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=ti(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new rR(n).identifier,s=[];return r&&s.push(ea.ESimulationFlag.SKIP_VALIDATE),a&&s.push(ea.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let n;let r=ti(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??5e3,c=t?.errorStates??[ea.ETransactionStatus.REJECTED],l=t?.successStates??[ea.ETransactionExecutionStatus.SUCCEEDED,ea.ETransactionStatus.ACCEPTED_ON_L2,ea.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await rN(o);try{let e=(n=await this.getTransactionStatus(r)).execution_status,t=n.finality_status;if(!t)throw Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){let r=`${e}: ${t}`,a=Error(r);throw a.response=n,s=!0,a}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(r)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await rN(o)}return d}getStorageAt(e,t,n=this.blockIdentifier){let r=ti(e),a=to(t),i=new rR(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){let r=new rR(t).identifier,a={};return rL("0.5",await this.getSpecVersion())||(a={simulation_flags:n?[ea.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...a})}async invoke(e,t){let n;return n=rM(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:ea.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),version:ea.ETransactionVersion.V3,signature:rE(e.signature),nonce:ti(t.nonce),resource_bounds:t.resourceBounds,tip:ti(t.tip),paymaster_data:t.paymasterData.map(e=>ti(e)),account_deployment_data:t.accountDeploymentData.map(e=>ti(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),type:ea.ETransactionType.INVOKE,max_fee:ti(t.maxFee||0),version:ea.ETransactionVersion.V1,signature:rE(e.signature),nonce:ti(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},a){let i;if(rC(e)||rM(a)){if(rC(e)&&!rM(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ea.ETransactionType.DECLARE,contract_class:{sierra_program:rf(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:ea.ETransactionVersion.V2,max_fee:ti(a.maxFee||0),signature:rE(t),sender_address:n,nonce:ti(a.nonce)}});else if(rC(e)&&rM(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ea.ETransactionType.DECLARE,sender_address:n,compiled_class_hash:r||"",version:ea.ETransactionVersion.V3,signature:rE(t),nonce:ti(a.nonce),contract_class:{sierra_program:rf(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:ti(a.tip),paymaster_data:a.paymasterData.map(e=>ti(e)),account_deployment_data:a.accountDeploymentData.map(e=>ti(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ea.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:ea.ETransactionVersion.V1,max_fee:ti(a.maxFee||0),signature:rE(t),sender_address:n,nonce:ti(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},a){let i;return i=rM(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:ea.ETransactionType.DEPLOY_ACCOUNT,version:ea.ETransactionVersion.V3,signature:rE(r),nonce:ti(a.nonce),contract_address_salt:ti(n||0),constructor_calldata:nP.toHex(t||[]),class_hash:ti(e),resource_bounds:a.resourceBounds,tip:ti(a.tip),paymaster_data:a.paymasterData.map(e=>ti(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:nP.toHex(t||[]),class_hash:ti(e),contract_address_salt:ti(n||0),type:ea.ETransactionType.DEPLOY_ACCOUNT,max_fee:ti(a.maxFee||0),version:ea.ETransactionVersion.V1,signature:rE(r),nonce:ti(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let n=new rR(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tw(e.entrypoint),calldata:nP.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:rD(n),to_address:ti(r),entry_point_selector:tk(a),payload:ty(i)},o=new rR(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n;let r=rX(t);if(n=rM(e)?{signature:rE(e.signature),nonce:ti(e.nonce),resource_bounds:e.resourceBounds,tip:ti(e.tip),paymaster_data:e.paymasterData.map(e=>ti(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>ti(e))}:{signature:rE(e.signature),nonce:ti(e.nonce),max_fee:ti(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:ea.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),version:ti(e.version||r.v3),...n};if("DECLARE"===e.type)return rC(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:rf(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ti(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:ti(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:nP.toHex(e.constructorCalldata||[]),class_hash:ti(e.classHash),contract_address_salt:ti(e.addressSalt||0),version:ti(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}};et({},{RpcChannel:()=>r0});var rQ={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},r0=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;transactionRetryIntervalFallback;waitMode;constructor(e){let{nodeUrl:t,retries:n,headers:r,blockIdentifier:a,chainId:i,specVersion:s,waitMode:o,transactionRetryIntervalFallback:c}=e||{};Object.values(eY).includes(t)?this.nodeUrl=rP(t,e?.default):t?this.nodeUrl=t:this.nodeUrl=rP(void 0,e?.default),this.retries=n||rQ.retries,this.headers={...rQ.headers,...r},this.blockIdentifier=a||rQ.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0,this.transactionRetryIntervalFallback=c}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){let r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return rV(this.nodeUrl,{method:"POST",body:n3(r),headers:this.headers})}errorHandler(e,t,n,r){if(n){let{code:r,message:a,data:i}=n;throw new eQ(`RPC: ${e} with params ${n3(t,null,2)}
 
        ${r}: ${a}: ${n3(i)}`)}if(r instanceof eQ)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new rR(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new rR(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=ti(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=ti(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new rR(n).identifier,s=[];return r&&s.push(R.gZ.SKIP_VALIDATE),a&&s.push(R.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let n;let r=ti(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[R.zO.REJECTED],l=t?.successStates??[R.y5.SUCCEEDED,R.zO.ACCEPTED_ON_L2,R.zO.ACCEPTED_ON_L1];for(;!i;){await rN(o);try{let e=(n=await this.getTransactionStatus(r)).execution_status,t=n.finality_status;if(!t)throw Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){let r=`${e}: ${t}`,a=Error(r);throw a.response=n,s=!0,a}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(r)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await rN(o)}return d}getStorageAt(e,t,n=this.blockIdentifier){let r=ti(e),a=to(t),i=new rR(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){let n=ti(e),r=new rR(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){let r=new rR(t).identifier,a={};return rL("0.5",await this.getSpecVersion())||(a={simulation_flags:n?[R.gZ.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...a})}async invoke(e,t){let n;return n=rM(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:R.xz.INVOKE,sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),version:R.sF.V3,signature:rE(e.signature),nonce:ti(t.nonce),resource_bounds:t.resourceBounds,tip:ti(t.tip),paymaster_data:t.paymasterData.map(e=>ti(e)),account_deployment_data:t.accountDeploymentData.map(e=>ti(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),type:R.xz.INVOKE,max_fee:ti(t.maxFee||0),version:R.sF.V1,signature:rE(e.signature),nonce:ti(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},a){let i;if(rC(e)||rM(a)){if(rC(e)&&!rM(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:R.xz.DECLARE,contract_class:{sierra_program:rf(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:R.sF.V2,max_fee:ti(a.maxFee||0),signature:rE(t),sender_address:n,nonce:ti(a.nonce)}});else if(rC(e)&&rM(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:R.xz.DECLARE,sender_address:n,compiled_class_hash:r||"",version:R.sF.V3,signature:rE(t),nonce:ti(a.nonce),contract_class:{sierra_program:rf(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:ti(a.tip),paymaster_data:a.paymasterData.map(e=>ti(e)),account_deployment_data:a.accountDeploymentData.map(e=>ti(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:R.xz.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:R.sF.V1,max_fee:ti(a.maxFee||0),signature:rE(t),sender_address:n,nonce:ti(a.nonce)}});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},a){let i;return i=rM(a)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:R.xz.DEPLOY_ACCOUNT,version:R.sF.V3,signature:rE(r),nonce:ti(a.nonce),contract_address_salt:ti(n||0),constructor_calldata:nP.toHex(t||[]),class_hash:ti(e),resource_bounds:a.resourceBounds,tip:ti(a.tip),paymaster_data:a.paymasterData.map(e=>ti(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:nP.toHex(t||[]),class_hash:ti(e),contract_address_salt:ti(n||0),type:R.xz.DEPLOY_ACCOUNT,max_fee:ti(a.maxFee||0),version:R.sF.V1,signature:rE(r),nonce:ti(a.nonce)}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let n=new rR(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tw(e.entrypoint),calldata:nP.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:rD(n),to_address:ti(r),entry_point_selector:tk(a),payload:ty(i)},o=new rR(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n;let r=rX(t);if(n=rM(e)?{signature:rE(e.signature),nonce:ti(e.nonce),resource_bounds:e.resourceBounds,tip:ti(e.tip),paymaster_data:e.paymasterData.map(e=>ti(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>ti(e))}:{signature:rE(e.signature),nonce:ti(e.nonce),max_fee:ti(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:R.xz.INVOKE,sender_address:e.contractAddress,calldata:nP.toHex(e.calldata),version:ti(e.version||r.v3),...n};if("DECLARE"===e.type)return rC(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:rf(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ti(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:ti(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:nP.toHex(e.constructorCalldata||[]),class_hash:ti(e.classHash),contract_address_salt:ti(e.addressSalt||0),version:ti(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},r1=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return rb(e,this.margin?.maxFee)}estimateFeeToBounds(e){return rT(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&tx(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:tr(t.overall_fee),gas_consumed:tr(t.gas_consumed),gas_price:tr(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?tr(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?tr(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:tr(e.overall_fee),gas_consumed:tr(e.gas_consumed),gas_price:tr(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?tr(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?tr(e.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:tx(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},r2=class e{statusReceipt;value;constructor(t){for(let[n]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,n,{enumerable:!1});for(let[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return"SUCCEEDED"===e.execution_status}static isReverted(e){return"REVERTED"===e.execution_status}static isRejected(e){return"REJECTED"===e.status}},r5=class{responseParser;channel;constructor(e){e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new r1):(this.channel=new r0({...e,waitMode:!1}),this.responseParser=new r1(e?.feeMarginPercentage))}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if("latest"===e)return;let n=await this.getBlockNumber(),r="pending"===e?n+1:Number(ti(e));if(r<=n)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await rN(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);te("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t,s=eI([n[0],r,i,a,n.length-1,...n.slice(1)].reduce((e,t)=>e+ek(ti(t)).padStart(64,"0"),""));return eI((0,L.ci)((0,$.fr)(t_(s))))}async getBlockWithReceipts(e){if(this.channel instanceof eJ.RpcChannel)throw new eQ("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){let{transactions:e}=await this.getBlockWithTxHashes("pending").then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(e=>this.getTransactionByHash(e)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new r2(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new r2(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let a;if(e)a=await this.getClassAt(e,n);else if(t)a=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return rC(a)?r?{cairo:"1",compiler:nr(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,r){return this.getInvokeEstimateFee(e,t,n,r)}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"INVOKE_FUNCTION",...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"DECLARE",...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:"DEPLOY_ACCOUNT",...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}};et({},{StarknetIdContract:()=>ar,StarknetIdIdentityContract:()=>ai,StarknetIdMulticallContract:()=>ao,StarknetIdPfpContract:()=>au,StarknetIdPopContract:()=>ap,StarknetIdVerifierContract:()=>al,dynamicCallData:()=>am,dynamicFelt:()=>ay,execution:()=>ag,getStarknetIdContract:()=>aa,getStarknetIdIdentityContract:()=>as,getStarknetIdMulticallContract:()=>ac,getStarknetIdPfpContract:()=>ah,getStarknetIdPopContract:()=>af,getStarknetIdVerifierContract:()=>ad,useDecoded:()=>at,useEncoded:()=>an});var r6="abcdefghijklmnopqrstuvwxyz0123456789-",r3=BigInt(r6.length+1),r4="",r8=BigInt(r6.length),r7=BigInt(r4.length),r9=BigInt(r4.length+1);function ae(e){let t=0;for(;e.endsWith(r4[r4.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function at(e){let t="";return(e.forEach(e=>{for(;e!==eO;){let n=e%r3;if(e/=r3,n===BigInt(r6.length)){let n=e/r9;if(n===eO){let r=e%r9;e=n,r===eO?t+=r6[0]:t+=r4[Number(r)-1]}else t+=r4[Number(e%r7)],e/=r7}else t+=r6[Number(n)]}let[n,r]=ae(t);r&&(t=n+(r%2==0?r4[r4.length-1].repeat(r/2-1)+r4[0]+r6[1]:r4[r4.length-1].repeat((r-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function an(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(r4[0]+r6[1])){let[t,n]=ae(e.substring(0,e.length-2));e=t+r4[r4.length-1].repeat(2*(n+1))}else{let[t,n]=ae(e);n&&(e=t+r4[r4.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){let a=e[r],i=r6.indexOf(a),s=BigInt(r6.indexOf(a));-1!==i?r===e.length-1&&e[r]===r6[0]?(t+=n*r8,n*=r3*r3):(t+=n*s,n*=r3):-1!==r4.indexOf(a)&&(t+=n*r8,n*=r3,t+=n*BigInt((r===e.length-1?1:0)+r4.indexOf(a)),n*=r7)}return t}var ar=((V=ar||{}).MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",V.TESTNET_SEPOLIA="0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474",V);function aa(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f5345504f4c4941":return"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474";default:throw Error("Starknet.id is not yet deployed on this network")}}var ai=((N=ai||{}).MAINNET="0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",N.TESTNET_SEPOLIA="0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda",N);function as(e){switch(e){case"0x534e5f4d41494e":return"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af";case"0x534e5f5345504f4c4941":return"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var ao="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ac(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return ao;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var al=((O=al||{}).MAINNET="0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",O.TESTNET_SEPOLIA="0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566",O);function ad(e){switch(e){case"0x534e5f4d41494e":return"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf";case"0x534e5f5345504f4c4941":return"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var au=((B=au||{}).MAINNET="0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",B.TESTNET_SEPOLIA="0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02",B);function ah(e){switch(e){case"0x534e5f4d41494e":return"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7";case"0x534e5f5345504f4c4941":return"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02";default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ap=((P=ap||{}).MAINNET="0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",P.TESTNET_SEPOLIA="0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a",P);function af(e){switch(e){case"0x534e5f4d41494e":return"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4";case"0x534e5f5345504f4c4941":return"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a";default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function ag(e,t,n){return new nc({Static:e,IfEqual:t?ns(t[0],t[1],t[2]):void 0,IfNotEqual:n?ns(n[0],n[1],n[2]):void 0})}function ay(e,t){return new nc({Hardcoded:e,Reference:t?ns(t[0],t[1]):void 0})}function am(e,t,n){return new nc({Hardcoded:e,Reference:t?ns(t[0],t[1]):void 0,ArrayReference:n?ns(n[0],n[1]):void 0})}var a_=class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){let r=await e.getChainId(),a=n??aa(r);try{let n=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:nP.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),r=at(n);if(!r)throw Error("Starkname not found");return r}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){let r=await e.getChainId(),a=n??aa(r);try{let n=t.replace(".stark","").split(".").map(e=>an(e).toString(10));return(await e.callContract({contractAddress:a,entrypoint:"domain_to_address",calldata:nP.compile({domain:n,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){let c=await e.getChainId(),l=n??aa(c),d=r??as(c),u=a??ad(c),h=i??ah(c),p=s??af(c),f=o??ac(c);try{let n=[{execution:ag({}),to:am(l),selector:am(tw("address_to_domain")),calldata:[am(t),am("0")]},{execution:ag({}),to:ay(l),selector:ay(tw("domain_to_id")),calldata:[am(void 0,void 0,[0,0])]},{execution:ag({}),to:ay(d),selector:ay(tw("get_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("twitter")),am(u),am("0")]},{execution:ag({}),to:ay(d),selector:ay(tw("get_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("github")),am(u),am("0")]},{execution:ag({}),to:ay(d),selector:ay(tw("get_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("discord")),am(u),am("0")]},{execution:ag({}),to:ay(d),selector:ay(tw("get_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("proof_of_personhood")),am(p),am("0")]},{execution:ag({}),to:ay(d),selector:ay(tw("get_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("nft_pp_contract")),am(h),am("0")]},{execution:ag({}),to:ay(d),selector:ay(tw("get_extended_verifier_data")),calldata:[am(void 0,[1,0]),am(tB("nft_pp_id")),am("2"),am(h),am("0")]},{execution:ag(void 0,void 0,[6,0,0]),to:ay(void 0,[6,0]),selector:ay(tw("tokenURI")),calldata:[am(void 0,[7,1]),am(void 0,[7,2])]}],r=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:nP.compile({calls:n})});if(Array.isArray(r)){let e=parseInt(r[0],16),t=[],n=1;for(let a=0;a<e;a+=1)if(n<r.length){let e=parseInt(r[n],16);n+=1;let a=r.slice(n,n+e);t.push(a),n+=e}else break;let a=at(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===r[0]?t[8].slice(1).map(e=>tP(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},aE=class extends(0,X.AF)(r5,a_){};new r5({default:!0}),et({},{TypedDataRevision:()=>H.P,encodeData:()=>aN,encodeType:()=>ax,encodeValue:()=>aV,getDependencies:()=>aS,getMessageHash:()=>aB,getStructHash:()=>aO,getTypeHash:()=>aD,isMerkleTreeType:()=>aC,prepareSelector:()=>aI}),et({},{MerkleTree:()=>ab,proofMerklePath:()=>function e(t,n,r,a=n8){if(0===r.length)return t===n;let[i,...s]=r;return e(t,ab.hash(n,i,a),s,a)}});var ab=class e{leaves;branches=[];root;hashMethod;constructor(e,t=n8){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t,n=n8){let[r,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return n(r,a)}getProof(t,n=this.leaves,r=[]){let a=n.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===n.length)return r;let i=a%2==0,s=(i?n[a+1]:n[a-1])??"0x0",o=[...r,s],c=this.leaves.length===n.length?-1:this.branches.findIndex(e=>e.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}},aT={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},av={[H.P.ACTIVE]:{domain:"StarknetDomain",hashMethod:rt,hashMerkleMethod:n7,escapeTypeString:e=>`"${e}"`,presetTypes:aT},[H.P.LEGACY]:{domain:"StarkNetDomain",hashMethod:re,hashMerkleMethod:n8,escapeTypeString:e=>e,presetTypes:{}}};function aA(e,t,{min:n,max:r}){let a=BigInt(e);te(a>=n&&a<=r,`${a} (${t}) is out of bounds [${n}, ${r}]`)}function aw({types:e,domain:t}){return av[H.P.ACTIVE].domain in e&&t.revision===H.P.ACTIVE?H.P.ACTIVE:av[H.P.LEGACY].domain in e&&(t.revision??H.P.LEGACY)===H.P.LEGACY?H.P.LEGACY:void 0}function ak(e){try{return ti(e)}catch(t){if(tx(e))return ti(tB(e));throw Error(`Invalid BigNumberish: ${e}`)}}function aI(e){return tn(e)?e:tw(e)}function aC(e){return"merkletree"===e.type}function aS(e,t,n=[],r="",a=H.P.LEGACY){return("*"===t[t.length-1]?t=t.slice(0,-1):a===H.P.ACTIVE&&("enum"===t?t=r:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t])?n:[t,...e[t].reduce((t,n)=>[...t,...aS(e,n.type,t,n.contains,a).filter(e=>!t.includes(e))],[])]}function ax(e,t,n=H.P.LEGACY){let r=n===H.P.ACTIVE?{...e,...av[n].presetTypes}:e,[a,...i]=aS(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],o=av[n].escapeTypeString;return s.map(e=>{let t=r[e].map(e=>{let t="enum"===e.type&&n===H.P.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?o(e):e).join(",")})`:o(t);return`${o(e.name)}:${r}`});return`${o(e)}(${t})`}).join("")}function aD(e,t,n=H.P.LEGACY){return tw(ax(e,t,n))}function aV(e,t,n,r={},a=H.P.LEGACY){if(e[t])return[t,aO(e,t,n,a)];if(av[a].presetTypes[t])return[t,aO(av[a].presetTypes,t,n,a)];if(t.endsWith("*")){let r=n.map(n=>aV(e,t.slice(0,-1),n,void 0,a)[1]);return[t,av[a].hashMethod(r)]}switch(t){case"enum":if(a===H.P.ACTIVE){let[i,s]=Object.entries(n)[0],o=e[r.parent][0],c=e[o.contains],l=c.find(e=>e.name===i),d=c.indexOf(l),u=l.type.slice(1,-1).split(",").map((t,n)=>t?aV(e,t,s[n],void 0,a)[1]:t);return[t,av[a].hashMethod([d,...u])]}return[t,ak(n)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let n=e[t.parent].find(e=>e.name===t.key);if(!aC(n))throw Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,r),{root:i}=new ab(n.map(n=>aV(e,t,n,void 0,a)[1]),av[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",aI(n)];case"string":if(a===H.P.ACTIVE){let e=tR(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,av[a].hashMethod(r)]}return[t,ak(n)];case"i128":if(a===H.P.ACTIVE){let e=BigInt(n);return aA(e,t,eH),[t,ak(e<0n?eF+e:e)]}return[t,ak(n)];case"timestamp":case"u128":return a===H.P.ACTIVE&&aA(n,t,eU),[t,ak(n)];case"felt":case"shortstring":return a===H.P.ACTIVE&&aA(ak(n),t,e$),[t,ak(n)];case"ClassHash":case"ContractAddress":return a===H.P.ACTIVE&&aA(n,t,e$),[t,ak(n)];case"bool":return a===H.P.ACTIVE&&te("boolean"==typeof n,`Type mismatch for ${t} ${n}`),[t,ak(n)];default:if(a===H.P.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,ak(n)]}}function aN(e,t,n,r=H.P.LEGACY){let[a,i]=(e[t]??av[r].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===n[s.name]||null===n[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=n[s.name],c={parent:t,key:s.name},[l,d]=aV(e,s.type,o,c,r);return[[...a,l],[...i,d]]},[["felt"],[aD(e,t,r)]]);return[a,i]}function aO(e,t,n,r=H.P.LEGACY){return av[r].hashMethod(aN(e,t,n,r)[1])}function aB(e,t){if(!(e.message&&e.primaryType&&e.types&&aw(e)))throw Error("Typed data does not match JSON schema");let n=aw(e),{domain:r,hashMethod:a}=av[n];return a([tB("StarkNet Message"),aO(e.types,r,e.domain,n),t,aO(e.types,e.primaryType,e.message,n)])}var aP=class{pk;constructor(e=U.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?ew(e):ti(e)}async getPubKey(){return U.getStarkKey(this.pk)}async signMessage(e,t){let n=aB(e,t);return this.signRaw(n)}async signTransaction(e,t){let n;let r=rG(e,t.cairoVersion);if(Object.values(en.ETransactionVersion2).includes(t.version))n=nQ({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version});else if(Object.values(en.ETransactionVersion3).includes(t.version))n=nQ({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:rv(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:rv(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(n)}async signDeployAccountTransaction(e){let t;let n=nP.compile(e.constructorCalldata);if(Object.values(en.ETransactionVersion2).includes(e.version))t=n1({...e,salt:e.addressSalt,constructorCalldata:n,version:e.version});else if(Object.values(en.ETransactionVersion3).includes(e.version))t=n1({...e,salt:e.addressSalt,compiledConstructorCalldata:n,version:e.version,nonceDataAvailabilityMode:rv(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:rv(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(en.ETransactionVersion2).includes(e.version))t=n0({...e,version:e.version});else if(Object.values(en.ETransactionVersion3).includes(e.version))t=n0({...e,version:e.version,nonceDataAvailabilityMode:rv(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:rv(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return U.sign(e,this.pk)}};function aF(e){return new tU(e).toBigInt()}function aR(e){return tU.is(e)}function aM(e){return new tU(e).toUint256HexString()}function aL(e){return"event"===e.type}function a$(e){return nt(e)?function(e){let t=e.filter(e=>aL(e)&&"struct"===e.kind),n=e.filter(e=>aL(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let r=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=n.find(e=>e.variants.some(s));if(void 0===e)break;let t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);let o=r.pop(),c={[eI(U.keccak(eb(o)).toString(16))]:t};for(;r.length>0;)c={[eI(U.keccak(eb(r.pop())).toString(16))]:c};return function e(t,n){let r={...t};return aH(t)&&aH(n)&&Object.keys(n).forEach(a=>{aH(n[a])&&a in t?r[a]=e(t[a],n[a]):Object.assign(r,{[a]:n[a]})}),r}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let n=t.name,r={...t};return r.name=n,{...e,[eI(U.keccak(eb(n)).toString(16))]:r}},{})}function aH(e){return e&&"object"==typeof e&&!Array.isArray(e)}function aU(e,t,n,r){return e.flat().reduce((e,a)=>{let i=t[a.keys.shift()??0];if(!i)return e;for(;!i.name;){let e=a.keys.shift();te(!!e,'Not enough data in "key" property of this event.'),i=i[e]}let s={};s[i.name]={};let o=a.keys[Symbol.iterator](),c=a.data[Symbol.iterator](),l=i.members?.filter(e=>"key"===e.kind)||i.keys,d=i.members?.filter(e=>"data"===e.kind)||i.data;return l.forEach(e=>{s[i.name][e.name]=nA(o,e,n,r,s[i.name])}),d.forEach(e=>{s[i.name][e.name]=nA(c,e,n,r,s[i.name])}),e.push(s),e},[])}function aj(e){if(!e.events)throw Error("UDC emitted event is empty");let t=e.events.find(e=>tl(e.from_address)===tl(eG.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}et({},{UINT_128_MAX:()=>t$,UINT_256_MAX:()=>tH,bnToUint256:()=>aM,isUint256:()=>aR,uint256ToBN:()=>aF}),et({},{getAbiEvents:()=>a$,isAbiEvent:()=>aL,isObject:()=>aH,parseEvents:()=>aU,parseUDCEvent:()=>aj});var aY=class extends aE{signer;address;cairoVersion;transactionVersion;constructor(e,t,n,r,a=en.ETransactionVersion.V2){super(e),this.address=t.toLowerCase(),this.signer=tx(n)||n instanceof Uint8Array?new aP(n):n,r&&(this.cairoVersion=r.toString()),this.transactionVersion=a}getPreferredVersion(e,t){return this.transactionVersion===en.ETransactionVersion.V3?t:this.transactionVersion===en.ETransactionVersion.V2?e:en.ETransactionVersion.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return tr(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){let{nonce:n,blockIdentifier:r,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=tr(n??await this.getNonce()),c=rA(this.getPreferredVersion(en.ETransactionVersion.F1,en.ETransactionVersion.F3),rw(a)),l=await this.getChainId(),d={...rk(t),walletAddress:this.address,nonce:o,maxFee:eO,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},u=await this.buildInvocation(s,d);return super.getInvokeEstimateFee({...u},{...rk(t),version:c,nonce:o},r,t.skipValidate)}async estimateDeclareFee(e,t={}){let{blockIdentifier:n,nonce:r,version:a,skipValidate:i=!0}=t,s=tr(r??await this.getNonce()),o=rA(rC(e.contract)?this.getPreferredVersion(en.ETransactionVersion.F2,en.ETransactionVersion.F3):en.ETransactionVersion.F1,rw(a)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...rk(t),nonce:s,chainId:c,version:o,walletAddress:this.address,maxFee:eO,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...rk(t),version:o,nonce:s},n,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:n=[],contractAddress:r},a={}){let{blockIdentifier:i,version:s,skipValidate:o=!0}=a,c=rA(this.getPreferredVersion(en.ETransactionVersion.F1,en.ETransactionVersion.F3),rw(s)),l=await this.getChainId(),d=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:n,contractAddress:r},{...rk(a),nonce:eO,chainId:l,version:c,walletAddress:this.address,maxFee:eO,cairoVersion:void 0,skipValidate:o});return super.getDeployAccountEstimateFee({...d},{...rk(a),version:c,nonce:eO},i,a.skipValidate)}async estimateDeployFee(e,t={}){let n=this.buildUDCContractPayload(e);return this.estimateInvokeFee(n,t)}async estimateFeeBulk(e,t={}){let{nonce:n,blockIdentifier:r,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...rk(t),versions:[en.ETransactionVersion.F1,rA(this.getPreferredVersion(en.ETransactionVersion.F2,en.ETransactionVersion.F3),a)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:r,skipValidate:i})}async simulateTransaction(e,t={}){let{nonce:n,blockIdentifier:r,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...rk(t),versions:[en.ETransactionVersion.V1,rA(this.getPreferredVersion(en.ETransactionVersion.V2,en.ETransactionVersion.V3),s)],nonce:n,blockIdentifier:r,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:r,skipValidate:a,skipExecute:i})}async execute(e,t,n={}){let r=void 0===t||Array.isArray(t)?n:t,a=Array.isArray(e)?e:[e],i=tr(r.nonce??await this.getNonce()),s=rA(this.getPreferredVersion(en.ETransactionVersion.V1,en.ETransactionVersion.V3),r.version),o=await this.getUniversalSuggestedFee(s,{type:"INVOKE_FUNCTION",payload:e},{...r,version:s}),c=await this.getChainId(),l={...rk(r),resourceBounds:o.resourceBounds,walletAddress:this.address,nonce:i,maxFee:o.maxFee,version:s,chainId:c,cairoVersion:await this.getCairoVersion()},d=await this.signer.signTransaction(a,l),u=rG(a,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:u,signature:d},{...rk(r),resourceBounds:o.resourceBounds,nonce:i,maxFee:o.maxFee,version:s})}async declareIfNot(e,t={}){let n=rS(e);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(e,t)}return{transaction_hash:"",class_hash:n.classHash}}async declare(e,t={}){let n=rS(e),{nonce:r,version:a}=t,i=rA(rC(e.contract)?this.getPreferredVersion(en.ETransactionVersion.V2,en.ETransactionVersion.V3):en.ETransactionVersion.V1,a),s=await this.getUniversalSuggestedFee(i,{type:"DECLARE",payload:n},{...t,version:i}),o={...rk(t),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:tr(r??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(n,o);return this.declareContract(c,o)}async deploy(e,t={}){let{calls:n,addresses:r}=rz(e,this.address);return{...await this.execute(n,void 0,t),contract_address:r}}async deployContract(e,t={}){let n=await this.deploy(e,t);return aj(await this.waitForTransaction(n.transaction_hash))}async declareAndDeploy(e,t={}){let{constructorCalldata:n,salt:r,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:r,unique:a,constructorCalldata:n},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:n=0,contractAddress:r},a={}){let i=rA(this.getPreferredVersion(en.ETransactionVersion.V1,en.ETransactionVersion.V3),a.version),s=await this.getChainId(),o=nP.compile(t),c=r??rn(n,e,o,0),l=await this.getUniversalSuggestedFee(i,{type:"DEPLOY_ACCOUNT",payload:{classHash:e,constructorCalldata:o,addressSalt:n,contractAddress:c}},a),d=await this.signer.signDeployAccountTransaction({...rk(a),classHash:e,constructorCalldata:o,contractAddress:c,addressSalt:n,chainId:s,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i,nonce:eO});return this.deployAccountContract({classHash:e,addressSalt:n,constructorCalldata:t,signature:d},{...rk(a),nonce:eO,resourceBounds:l.resourceBounds,maxFee:l.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return aB(e,this.address)}async verifyMessageHash(e,t,n,r){let a;let i=r||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};for(let r of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:this.address,entrypoint:r,calldata:nP.compile({hash:tr(e).toString(),signature:rm(t)})});if(i.nokResponse.includes(n[0].toString()))return!1;if(0===i.okResponse.length||i.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(i.error.some(t=>e.message.includes(t)))return!1;a=e}throw Error(`Signature verification Error: ${a}`)}async verifyMessage(e,t,n,r){let a=await this.hashMessage(e);return this.verifyMessageHash(a,t,n,r)}async getUniversalSuggestedFee(e,{type:t,payload:n},r){let a=0,i=rT(eO);return e===en.ETransactionVersion.V3?i=r.resourceBounds??(await this.getSuggestedFee({type:t,payload:n},r)).resourceBounds:a=r.maxFee??(await this.getSuggestedFee({type:t,payload:n},r)).suggestedMaxFee,{maxFee:a,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},n){let r;switch(e){case"INVOKE_FUNCTION":r=await this.estimateInvokeFee(t,n);break;case"DECLARE":r=await this.estimateDeclareFee(t,n);break;case"DEPLOY_ACCOUNT":r=await this.estimateAccountDeployFee(t,n);break;case"DEPLOY":r=await this.estimateDeployFee(t,n);break;default:r={gas_consumed:0n,gas_price:0n,overall_fee:eO,unit:"FRI",suggestedMaxFee:eO,resourceBounds:rT(eO),data_gas_consumed:0n,data_gas_price:0n}}return r}async buildInvocation(e,t){let n=rG(e,await this.getCairoVersion()),r=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...rk(t),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(e,t){let{classHash:n,contract:r,compiledClassHash:a}=rS(e),i=rB(r);if(void 0===a&&(t.version===en.ETransactionVersion3.F3||t.version===en.ETransactionVersion3.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...rk(t),classHash:n,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:n=[],contractAddress:r},a){let i=nP.compile(n),s=r??rn(t,e,i,0),o=a.skipValidate?[]:await this.signer.signDeployAccountTransaction({...a,...rk(a),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...rk(a),classHash:e,addressSalt:t,constructorCalldata:i,signature:o}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:n="0",unique:r=!0,constructorCalldata:a=[]}=e,i=nP.compile(a);return{contractAddress:eG.ADDRESS,entrypoint:eG.ENTRYPOINT,calldata:[t,n,tm(r),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:n,blockIdentifier:r,skipValidate:a=!0}=t,i=await this.getNonceSafe(n),s=await this.getChainId(),o=t.versions.map(e=>rA(e)),c="payload"in e[0]?e[0].payload:e[0],l="DEPLOY_ACCOUNT"===e[0].type?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,n)=>{let c="payload"in e?e.payload:e,d={...rk(t),walletAddress:this.address,nonce:tr(Number(i)+n),maxFee:eO,chainId:s,cairoVersion:l,version:"",skipValidate:a},u={type:e.type,nonce:tr(Number(i)+n),blockIdentifier:r,version:""};if("INVOKE_FUNCTION"===e.type){let e=rI(o[1]);d.version=e,u.version=e;let t=await this.buildInvocation([].concat(c),d);return{...u,...t}}if("DEPLOY"===e.type){let e=rI(o[1]);d.version=e,u.version=e;let t=this.buildUDCContractPayload(c),n=await this.buildInvocation(t,d);return{...u,...n,type:"INVOKE_FUNCTION"}}if("DECLARE"===e.type){let e=rC(c.contract)?o[1]:o[0];d.version=e,u.version=e;let t=await this.buildDeclarePayload(c,d);return{...u,...t}}if("DEPLOY_ACCOUNT"===e.type){let e=rI(o[1]);d.version=e,u.version=e;let t=await this.buildAccountDeployPayload(c,d);return{...u,...t}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}};function aK(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function aW(e){return e.request({type:"wallet_getPermissions"})}function aq(e,t){return e.request({type:"wallet_watchAsset",params:t})}function aG(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function az(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function aX(e){return e.request({type:"wallet_requestChainId"})}function aJ(e){return e.request({type:"wallet_deploymentData"})}function aZ(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function aQ(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function a0(e,t){return e.request({type:"wallet_signTypedData",params:t})}function a1(e){return e.request({type:"wallet_supportedSpecs"})}function a2(e,t){e.on("accountsChanged",t)}function a5(e,t){e.on("networkChanged",t)}et({},{addDeclareTransaction:()=>aQ,addInvokeTransaction:()=>aZ,addStarknetChain:()=>aG,deploymentData:()=>aJ,getPermissions:()=>aW,onAccountChange:()=>a2,onNetworkChanged:()=>a5,requestAccounts:()=>aK,requestChainId:()=>aX,signMessage:()=>a0,supportedSpecs:()=>a1,switchStarknetChain:()=>az,watchAsset:()=>aq})}}]);