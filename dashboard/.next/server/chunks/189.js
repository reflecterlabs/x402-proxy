"use strict";exports.id=189,exports.ids=[189],exports.modules={3704:(e,t,s)=>{s.d(t,{f:()=>m});var r,i=s(5487);s(4330),s(7015),s(8725),s(4565);var n=s(8143),a=s(7384),l=class{#e;#t=864e5;constructor(e){this.#e=e}isEventThrottled(e){let t=Date.now(),s=this.#s(e),r=this.#e.getItem(s);return!!r&&!(t-r>this.#t)||(this.#e.setItem(s,t),!1)}#s(e){let{sk:t,pk:s,payload:r,...i}=e,n={...r,...i};return JSON.stringify(Object.keys({...r,...i}).sort().map(e=>n[e]))}},o=class{#r="clerk_telemetry_throttler";getItem(e){return this.#i()[e]}setItem(e,t){try{let s=this.#i();s[e]=t,localStorage.setItem(this.#r,JSON.stringify(s))}catch(e){e instanceof DOMException&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0&&localStorage.removeItem(this.#r)}}removeItem(e){try{let t=this.#i();delete t[e],localStorage.setItem(this.#r,JSON.stringify(t))}catch{}}#i(){try{let e=localStorage.getItem(this.#r);if(!e)return{};return JSON.parse(e)}catch{return{}}}static isSupported(){return"undefined"!=typeof window&&!!window.localStorage}},d=class{#e=new Map;#n=1e4;getItem(e){if(this.#e.size>this.#n){this.#e.clear();return}return this.#e.get(e)}setItem(e,t){this.#e.set(e,t)}removeItem(e){this.#e.delete(e)}};let c=new Set(["error","warn","info","debug","trace"]),h={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"};var u=class{#a;#l;#o={};#d=[];#c=null;constructor(e){this.#a={maxBufferSize:e.maxBufferSize??h.maxBufferSize,samplingRate:e.samplingRate??h.samplingRate,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:h.endpoint},e.clerkVersion||"undefined"!=typeof window?this.#o.clerkVersion=e.clerkVersion??"":this.#o.clerkVersion="",this.#o.sdk=e.sdk,this.#o.sdkVersion=e.sdkVersion,this.#o.publishableKey=e.publishableKey??"";let t=(0,a.nQ)(e.publishableKey);t&&(this.#o.instanceType=t.instanceType),e.secretKey&&(this.#o.secretKey=e.secretKey.substring(0,16)),this.#l=new l(o.isSupported()?new o:new d)}get isEnabled(){return!("development"!==this.#o.instanceType||this.#a.disabled||"undefined"!=typeof process&&process.env&&(0,n.fQ)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return this.#a.debug||"undefined"!=typeof process&&process.env&&(0,n.fQ)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){try{let t=this.#h(e.event,e.payload);if(this.#u(t.event,t),!this.#p(t,e.eventSamplingRate))return;this.#d.push({kind:"event",value:t}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(e){try{if(!this.#m(e))return;let t="string"==typeof e?.level&&c.has(e.level),s="string"==typeof e?.message&&e.message.trim().length>0,r=null,i=e?.timestamp;if("number"==typeof i||"string"==typeof i){let e=new Date(i);Number.isNaN(e.getTime())||(r=e)}if(!t||!s||null===r){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:s,timestampIsValid:null!==r});return}let n=this.#f(),a={sdk:n.name,sdkv:n.version,cv:this.#o.clerkVersion??"",lvl:e.level,msg:e.message,ts:r.toISOString(),pk:this.#o.publishableKey||null,payload:this.#y(e.context)};this.#d.push({kind:"log",value:a}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#p(e,t){return this.isEnabled&&!this.isDebug&&this.#v(e,t)}#m(e){return!0}#v(e,t){let s=Math.random();return s<=this.#a.samplingRate&&(!1===this.#a.perEventSampling||void 0===t||s<=t)&&!this.#l.isEventThrottled(e)}#g(){if("undefined"==typeof window){this.#b();return}if(this.#d.length>=this.#a.maxBufferSize){this.#c&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number(this.#c)):clearTimeout(Number(this.#c))),this.#b();return}this.#c||("requestIdleCallback"in window?this.#c=requestIdleCallback(()=>{this.#b(),this.#c=null}):this.#c=setTimeout(()=>{this.#b(),this.#c=null},0))}#b(){let e=[...this.#d];if(this.#d=[],this.#c=null,0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),s=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),s.length>0&&fetch(new URL("/v1/logs",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:s})}).catch(()=>void 0)}#u(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))}#f(){let e={name:this.#o.sdk,version:this.#o.sdkVersion};if("undefined"!=typeof window){let t=window;if(t.Clerk){let s=t.Clerk;if("object"==typeof s&&null!==s&&"constructor"in s&&"function"==typeof s.constructor&&s.constructor.sdkMetadata){let{name:t,version:r}=s.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==r&&(e.version=r)}}}return e}#h(e,t){let s=this.#f();return{event:e,cv:this.#o.clerkVersion??"",it:this.#o.instanceType??"",sdk:s.name,sdkv:s.version,...this.#o.publishableKey?{pk:this.#o.publishableKey}:{},...this.#o.secretKey?{sk:this.#o.secretKey}:{},payload:t}}#y(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}}};r=i.WX,async(...e)=>{let{data:t,errors:s}=await r(...e);if(s)throw s[0];return t};var p=s(6543);let g={secretKey:p.Cn,publishableKey:p.Am,apiUrl:p.T5,apiVersion:p.Gn,userAgent:"@clerk/nextjs@6.36.7",proxyUrl:p.NM,domain:p.yK,isSatellite:p.lo,machineSecretKey:p.v$,sdkMetadata:p.nE,telemetry:{disabled:p.CY,debug:p.w4}},m=e=>(function(e){let t={...e},s=(0,i.gf)(t),r=(0,i.sA)({options:t,apiClient:s}),n=new u({publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{},...t.telemetry||{}});return{...s,...r,telemetry:n}})({...g,...e})},4750:(e,t,s)=>{let r,i;s.d(t,{t0:()=>c,ur:()=>o,t$:()=>d});var n=Object.getOwnPropertyNames;let a=(r={"src/runtime/node/safe-node-apis.js"(e,t){let{existsSync:r,writeFileSync:i,readFileSync:n,appendFileSync:a,mkdirSync:l,rmSync:o}=s(7561),d=s(9411);t.exports={fs:{existsSync:r,writeFileSync:i,readFileSync:n,appendFileSync:a,mkdirSync:l,rmSync:o},path:d,cwd:()=>process.cwd()}}},function(){return i||(0,r[n(r)[0]])((i={exports:{}}).exports,i),i.exports})();function l(e,t){if(!e)throw Error(`Clerk: ${t} is missing. This is an internal error. Please contact Clerk's support.`)}let o=()=>(l(a.fs,"fs"),a.fs),d=()=>(l(a.path,"path"),a.path),c=()=>(l(a.cwd,"cwd"),a.cwd)}};